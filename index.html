<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Real Time News</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-6 font-sans">
  <div class="max-w-3xl mx-auto">
    <h1 class="text-3xl font-bold mb-4 text-center">Real Time News</h1>
    <input id="searchInput" class="w-full p-2 mb-4 rounded bg-gray-800 text-white" type="text" placeholder="Search topic like 'tech news'...">
    <button onclick="generateNews()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Generate News</button>

    <div id="newsOutput" class="mt-6 bg-gray-800 p-4 rounded shadow-lg"></div>
  </div>

  <script>
    const GOOGLE_API_KEY = "AIzaSyCrV8RJ-kUj-LCxbqfB1QMa6RsPQ4bM80Y";
    const SEARCH_ENGINE_ID = "735baae6a3cee4779";
    const GEMINI_API_KEY = "AIzaSyAUS24UaK5kfxrfuUCue5zmyX3n3yD7Yek";

    async function generateNews() {
      const query = document.getElementById('searchInput').value;
      document.getElementById('newsOutput').innerHTML = 'Bhaukaal loading...';

      // Step 1: Google Search API
      const searchUrl = `https://www.googleapis.com/customsearch/v1?q=${encodeURIComponent(query)}&key=${GOOGLE_API_KEY}&cx=${SEARCH_ENGINE_ID}`;
      const searchRes = await fetch(searchUrl);
      const searchData = await searchRes.json();

      if (!searchData.items || searchData.items.length === 0) {
        document.getElementById('newsOutput').innerText = 'Kuch nahi mila bhai!';
        return;
      }

      const summaries = searchData.items.map(item => `${item.title}: ${item.snippet}`).join('\n');

      // Step 2: Gemini 1.5 Flash API
      const geminiRes = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=' + GEMINI_API_KEY, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: `Based on these headlines, generate a short AI-style news article:\n${summaries}` }] }]
        })
      });

      const geminiData = await geminiRes.json();
      const responseText = geminiData?.candidates?.[0]?.content?.parts?.[0]?.text || "Kuch error aagaya bhai!";

      document.getElementById('newsOutput').innerText = responseText;
    }
  </script>
</body>
</html>
